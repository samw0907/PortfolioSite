/* src/styles/fx.css */

.home-fx {
  position: relative;
  width: 100%;
}

.home-fx-bg {
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;

  overflow: hidden;
  clip-path: inset(0);

  width: 100%;
  background: rgb(var(--hero-bg));
}

.home-fx .hero-frame {
  background: transparent;
}

.home-fx .hero-frame > .hero-bg {
  display: none;
}

.home-fx-bg .hero-bg {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.home-fx-bg .hero-spot-glow,
.home-fx-bg .hero-noise {
  position: absolute;
  inset: 0;
}

.home-fx-content {
  position: relative;
  z-index: 10;
}

:root:not(.dark) .hero-spot-glow {
  display: none;
}

@media (max-width: 640px) {
  .home-fx-bg {
    display: none;
  }

  .fx-band {
    position: relative;
    width: 100%;
    isolation: isolate;
    overflow: visible;
  }

  .fx-band-bg {
    position: absolute;
    inset: -24px;
    z-index: 0;
    pointer-events: none;
    overflow: visible;
  }

  .fx-band-bg .hero-bg {
    position: absolute;
    inset: 0;
  }

  .fx-band-content {
    position: relative;
    z-index: 1;
  }

  .hero-spot-glow {
    display: none !important;
  }

  .section--hero {
    position: relative;
    isolation: isolate;
  }

  .section--hero::before {
    content: "";
    position: absolute;
    inset: -18px;
    z-index: -1;
    pointer-events: none;
    background: radial-gradient(
      820px 520px at 50% 18%,
      rgb(var(--accent) / 0.22) 0%,
      rgb(var(--accent) / 0.14) 14%,
      transparent 66%
    );
  }
}

@media (min-width: 641px) {
  :root:not(.dark) .section--hero {
    position: relative;
    isolation: isolate;
  }

  :root:not(.dark) .section--hero::before {
    content: "";
    position: absolute;
    inset: -24px;
    z-index: -1;
    pointer-events: none;
    background: radial-gradient(
      1100px 640px at 25% 23%,
      rgb(var(--accent) / 0.28) 0%,
      rgb(var(--accent) / 0.12) 16%,
      transparent 78%
    );
  }
}

@media (min-width: 390px) and (max-width: 640px) {
  :root {
    --slab-y-shift: -24px;
    --slab-x-shift: 0px;
  }
}

@media (min-width: 361px) and (max-width: 389px) {
  :root {
    --slab-y-shift: 0px;
    --slab-x-shift: 0px;
  }
}

@media (max-width: 360px) {
  :root {
    --slab-y-shift: 0px;
    --slab-x-shift: 0px;
  }
}

@media (max-width: 640px) and (min-height: 780px) {
  :root {
    --slab1-y: -40px;
    --slab2-y: 12px;
    --slab3-y: 15px;
    --slab4-y: 18px;
    --slab5-y: -18px;
    --slab6-y: 14px;
    --slab7-y: -60px;
    --slab8-y: -80px;
    --slab9-y: -70px;
    --slab10-y: -140px;
    --slab11-y: 206px;
    --slab12-y: -56px;

    --hero-push: 42px;

    --slab2-scale: 0.78;
    --slab9-scale: 0.65;

    --slab8-scale: 1;
    --slab8-w: min(600px, 130vw);
    --slab8-h: min(600px, 104vw);

    --slab8-p1x: 2%;
    --slab8-p1y: 55%;
    --slab8-p2x: 94%;
    --slab8-p2y: 48%;
    --slab8-p3x: 90%;
    --slab8-p3y: 87%;
    --slab8-p4x: 2%;
    --slab8-p4y: 99%;
  }

  .fx-band--a .fx-band-content {
    padding-top: var(--hero-push, 0px);
  }

  .fx-band--a .fx-band-bg {
    inset: calc(-24px - var(--hero-push, 0px)) -24px -24px -24px;
  }
}

@media (max-width: 640px) {
  .fx-band-bg .hero-slab,
  .fx-band-bg .hero-slab-2,
  .fx-band-bg .hero-slab-3,
  .fx-band-bg .hero-slab-4,
  .fx-band-bg .hero-slab-5,
  .fx-band-bg .hero-slab-6,
  .fx-band-bg .hero-slab-7,
  .fx-band-bg .hero-slab-8,
  .fx-band-bg .hero-slab-9,
  .fx-band-bg .hero-slab-10,
  .fx-band-bg .hero-slab-11,
  .fx-band-bg .hero-slab-12 {
    width: min(460px, 96vw);
    height: min(460px, 96vw);
  }

  .fx-band-bg .hero-slab {
    top: calc(-16.5% + var(--slab-y-shift, 0px) + var(--slab1-y, 0px));
    right: calc(-30% + var(--slab-x-shift, 0px));
    left: auto;
    bottom: auto;
    transform: rotate(-14deg);
    opacity: 0.85;
  }

  .fx-band-bg .hero-slab-2 {
    top: calc(27% + var(--slab-y-shift, 0px) + var(--slab2-y, 0px));
    left: calc(-28% + var(--slab-x-shift, 0px));
    transform: rotate(16deg) scale(var(--slab2-scale, 1));
    opacity: 0.7;
    clip-path: polygon(15% 7%, 97% 4%, 78% 62%, 23% 78%);
  }

  .fx-band-bg .hero-slab-3 {
    top: calc(49% + var(--slab-y-shift, 0px));
    right: calc(-32% + var(--slab-x-shift, 0px));
    transform: rotate(12deg);
    opacity: 0.62;
    clip-path: polygon(6% 18%, 91% 0%, 99% 85%, 39% 66%);
  }

  .fx-band-bg .hero-slab-4 {
    top: calc(-0.5% + var(--slab-y-shift, 0px) + var(--slab4-y, 0px));
    left: calc(-45% + var(--slab-x-shift, 0px));
    width: min(600px, 130vw);
    height: min(270px, 104vw);
    transform: translateX(0) translateY(0) rotate(-14deg);
    opacity: 0.6;
    clip-path: polygon(26% 18%, 99% 40%, 79% 78%, 28% 54%);
  }

  .fx-band-bg .hero-slab-5 {
    top: calc(52.9% + var(--slab-y-shift, 0px) + var(--slab5-y, 0px));
    right: calc(-44% + var(--slab-x-shift, 0px));
    width: min(600px, 130vw);
    height: min(490px, 104vw);
    transform: rotate(-10deg);
    opacity: 0.65;
    clip-path: polygon(29% 12%, 88% 36%, 78% 99%, 26% 94%);
  }

  .fx-band-bg .hero-slab-6 {
    top: calc(2.1% + var(--slab-y-shift, 0px) + var(--slab6-y, 0px));
    left: calc(-23% + var(--slab-x-shift, 0px));
    transform: rotate(10deg);
    opacity: 0.55;
  }

  .fx-band-bg .hero-slab-7 {
    top: calc(41.6% + var(--slab-y-shift, 0px) + var(--slab7-y, 0px));
    right: calc(-50% + var(--slab-x-shift, 0px));
    transform: rotate(-14deg);
    opacity: 0.72;
  }

  .fx-band-bg .hero-slab-8 {
    top: calc(-1.7% + var(--slab-y-shift, 0px) + var(--slab8-y, 0px));
    left: calc(-20% + var(--slab-x-shift, 0px));

    /* ✅ NEW: size + scale are now controllable */
    width: var(--slab8-w, min(600px, 130vw));
    height: var(--slab8-h, min(600px, 104vw));

    transform: rotate(8deg) scale(var(--slab8-scale, 1));
    opacity: 0.7;

    /* ✅ NEW: each polygon point is tweakable */
    clip-path: polygon(
      var(--slab8-p1x, 2%) var(--slab8-p1y, 42%),
      var(--slab8-p2x, 96%) var(--slab8-p2y, 36%),
      var(--slab8-p3x, 86%) var(--slab8-p3y, 90%),
      var(--slab8-p4x, 2%) var(--slab8-p4y, 99%)
    );
  }

  .fx-band-bg .hero-slab-9 {
    top: calc(21% + var(--slab-y-shift, 0px) + var(--slab9-y, 0px));
    right: calc(-40% + var(--slab-x-shift, 0px));
    transform: rotate(-6deg) scale(var(--slab9-scale, 1));
    opacity: 0.55;
    clip-path: polygon(22% 45%, 96% 31%, 56% 90%, 2% 74%);
  }

  .fx-band-bg .hero-slab-10 {
    top: calc(41.5% + var(--slab-y-shift, 0px) + var(--slab10-y, 0px));
    left: calc(-30% + var(--slab-x-shift, 0px));
    transform: rotate(8deg);
    opacity: 0.45;
    clip-path: polygon(4% 25%, 96% 26%, 76% 90%, 12% 98%);
  }

  .fx-band-bg .hero-slab-11 {
    top: calc(58.5% + var(--slab-y-shift, 0px) + var(--slab11-y, 0px));
    right: calc(-42% + var(--slab-x-shift, 0px));
    transform: rotate(-6deg);
    opacity: 0.52;
    clip-path: polygon(4% 25%, 96% 26%, 76% 90%, 12% 98%);
  }

  .fx-band-bg .hero-slab-12 {
    top: calc(83.5% + var(--slab-y-shift, 0px) + var(--slab12-y, 0px));
    left: calc(-14% + var(--slab-x-shift, 0px));
    width: min(580px, 120vw);
    height: min(470px, 104vw);
    transform: rotate(10deg);
    opacity: 0.52;
    clip-path: polygon(4% 35%, 96% 26%, 76% 90%, 12% 98%);
  }
}

@media (max-width: 360px) and (max-height: 700px) {
  :root {
    --slab-y-shift: -18px;
    --slab-x-shift: 0px;
  }
}
